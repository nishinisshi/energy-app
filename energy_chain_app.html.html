<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›é€£é– ãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã¿ --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2 {
            font-weight: 600; /* semibold */
        }
        /* ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒã‚«ãƒ¼ãƒ‰ã‹ã‚‰ã¯ã¿å‡ºã¦ã‚‚è¦‹ãˆã‚‹ã‚ˆã†ã« */
        .energy-card {
            overflow: visible; 
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ --><div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg w-full max-w-2xl">

        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ --><div class="text-center mb-6">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h1>
            <p class="text-gray-600 mt-2">ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç§»ã‚Šå¤‰ã‚ã‚Šã‚’è€ƒãˆã‚ˆã†ï¼</p>
        </div>

        <div id="quiz-area" class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 shadow-sm">
            <h2 class="text-lg font-semibold text-gray-700 mb-2">ãŠé¡Œ <span id="question-number" class="text-blue-600">1å•ç›®</span></h2>
            <p id="question-text" class="text-base text-gray-800">
                ï¼ˆã“ã“ã«å•é¡Œæ–‡ãŒå…¥ã‚Šã¾ã™ï¼‰
            </p>
        </div>

        <div id="card-options-area" class="mb-4">
            <h2 class="text-lg font-semibold text-gray-700 mb-3">1. ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é¸ã¶</h2>
            <div id="card-options" class="flex flex-wrap justify-start -m-2">
                <!-- JavaScriptã§ã‚«ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã™ --></div>
        </div>

        <div id="answer-area" class="mb-6">
            <h2 class="text-lg font-semibold text-gray-700 mb-3">2. ã‚ãªãŸã®ç­”ãˆï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å‰Šé™¤ï¼‰</h2>
            <div id="answer-container" class="bg-gray-50 border border-gray-300 rounded-lg p-4 min-h-[8rem] flex flex-wrap items-center">
                <span class="text-gray-400">ã“ã“ã«ã‚«ãƒ¼ãƒ‰ãŒä¸¦ã¶ã‚ˆ</span>
            </div>
        </div>

        <div id="button-bar" class="flex flex-col sm:flex-row gap-3">
            <button id="check-answer" class="w-full sm:w-1/2 bg-green-500 text-white font-bold py-3 px-4 rounded-lg shadow hover:bg-green-600 transition-all duration-200">
                ã“ã‚Œã§ã©ã†ï¼Ÿ
            </button>
            <button id="reset-answer" class="w-full sm:w-1/4 bg-gray-500 text-white font-bold py-3 px-4 rounded-lg shadow hover:bg-gray-600 transition-all duration-200">
                ã‚„ã‚ŠãªãŠã—
            </button>
            <button id="next-question" class="w-full sm:w-1/4 bg-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow hover:bg-blue-600 transition-all duration-200" style="display: none;">
                æ¬¡ã®å•é¡Œã¸
            </button>
        </div>

        <!-- 4. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¨ãƒªã‚¢ (ã‚¯ãƒªã‚¢ç”»é¢ã«ã‚‚ãªã‚‹) --><div id="feedback-area" class="mt-4 p-3 rounded-lg text-center font-medium" style="display: none;">
            <!-- JavaScriptã§å†…å®¹ãŒè¨­å®šã•ã‚Œã¾ã™ --></div>

        <!-- 5. è§£èª¬ã‚¨ãƒªã‚¢ --><div id="explanation-area" class="mt-4 p-4 bg-yellow-50 border-yellow-300 rounded-lg" style="display: none;">
            <h3 class="font-semibold text-yellow-800">å…ˆè¼©ã‹ã‚‰ã®è§£èª¬</h3> <p id="explanation-text" class="text-yellow-700"></p>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ (é€šå¸¸) ---
            const quizzes = [
                {
                    question: "ã”é£¯ã‚’é£Ÿã¹ã¦ã€ŒäººãŒèµ°ã‚‹ã€ã¨ãã®ã€ä¸»ãªã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["åŒ–å­¦", "é‹å‹•"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ã”é£¯ï¼ˆæ „é¤Šï¼‰ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ä½“ã‚’å‹•ã‹ã™ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ã‚ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›1å›ï¼‰",
                    explanation: "ã”é£¯ã¨ã‹ã®æ „é¤Šã¯ã€ä½“ã®ä¸­ã«ãŠã„ã¨ã‘ã‚‹ã€ŒåŒ–å­¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚„ã€‚èµ°ã‚‹ã¨ãã€ç­‹è‚‰ãŒãã„ã¤ã‚’ã€Œé‹å‹•ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ãˆã¦å‹•ã„ã¨ã‚‹ã‚“ã‚ˆã€‚äººé–“ã‚‚ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã—ã¨ã‚‹ã‚“ã‚„ãªï¼"
                },
                {
                    question: "æ¤ç‰©ãŒè‚²ã¤ã€Œå…‰åˆæˆã€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["å…‰", "åŒ–å­¦"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š å¤ªé™½ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ã€æ¤ç‰©ãŒè“„ãˆã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ãˆã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›1å›ï¼‰",
                    explanation: "å¤ªé™½ã®ã€Œå…‰ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½¿ã£ã¦ã€æ¤ç‰©ãŒãƒ‡ãƒ³ãƒ—ãƒ³ã£ã¦ã„ã†ã€ŒåŒ–å­¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½œã‚‹ã‚“ã‚ˆã€‚è‡ªåˆ†ã®ãƒ¡ã‚·ã‚’è‡ªåˆ†ã§ä½œã‚‹æ„Ÿã˜ã‚„ãªï¼"
                },
                {
                    question: "ãŠæ¹¯ã‚’ã‚ã‹ã™ã€Œé›»æ°—ã‚±ãƒˆãƒ«ã€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["é›»æ°—", "ç†±"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ã‚³ãƒ³ã‚»ãƒ³ãƒˆã‹ã‚‰ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ãŠæ¹¯ã‚’ã‚°ãƒ©ã‚°ãƒ©ã•ã›ã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ã‚ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›1å›ï¼‰",
                    explanation: "ã‚³ãƒ³ã‚»ãƒ³ãƒˆã‹ã‚‰æ¥ãŸã€Œé›»æ°—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ã‚±ãƒˆãƒ«ã®åº•ã«ã‚ã‚‹ãƒ’ãƒ¼ã‚¿ãƒ¼ï¼ˆé›»ç†±ç·šï¼‰ã‚’é€šã£ã¦ã€Œç†±ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ã‚ã‚‹ã‚“ã‚ˆã€‚ã‚·ãƒ³ãƒ—ãƒ«ã‚„ãªï¼"
                },
                {
                    question: "é¢¨ã§ã¾ã‚ã‚‹ã€Œé¢¨åŠ›ç™ºé›»ã€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["é‹å‹•", "é›»æ°—"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š é¢¨ã®åŠ›ã§ã€å¤§ããªãƒãƒãŒå›ã£ã¦é›»æ°—ãŒã§ãã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›1å›ï¼‰",
                    explanation: "é¢¨ãŒå¹ãåŠ›ï¼ˆã€Œé‹å‹•ã€ï¼‰ã§ã€ã‚ã®ãƒ‡ã‚«ã„ãƒ—ãƒ­ãƒšãƒ©ãŒå›ã‚‹ã‚„ã‚ã€‚ãã‚ŒãŒç™ºé›»æ©Ÿã‚’å›ã—ã¦ã€Œé›»æ°—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½œã‚‹ã‚“ã‚ˆã€‚æ°´åŠ›ç™ºé›»ã¨ä¼¼ã¨ã‚‹ãªã€‚"
                },
                {
                    question: "ã€Œå¤ªé™½å…‰ãƒ‘ãƒãƒ«ã€ã§é›»æ°—ãŒã§ãã‚‹ã¨ãã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["å…‰", "é›»æ°—"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š å¤ªé™½ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ãã®ã¾ã¾é›»æ°—ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ã‚ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›1å›ï¼‰",
                    explanation: "å¤ªé™½ã®ã€Œå…‰ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ãƒ‘ãƒãƒ«ã«å½“ãŸã‚‹ã¨ã€ãƒ‘ãƒãƒ«ã®ä¸­ã®åŠå°ä½“ãŒã€Œé›»æ°—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç”Ÿã¿å‡ºã™ã‚“ã‚ˆã€‚å…‰åˆæˆã¨ã¯ã¾ãŸé•ã†ä»•çµ„ã¿ã§é›»æ°—ã‚’ä½œã‚‹ã‚“ã€ã™ã”ã„ã‚ˆãªã€‚"
                },
                {
                    question: "ä¹¾é›»æ± ã§å‹•ãã€Œæ‡ä¸­é›»ç¯ã€ãŒå…‰ã‚‹ã¾ã§ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["åŒ–å­¦", "é›»æ°—", "å…‰"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š é›»æ± ã®ä¸­ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€é›»ç·šã‚’é€šã£ã¦ã€ãƒ”ã‚«ãƒƒã¨å…‰ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›2å›ï¼‰",
                    explanation: "ã¾ãšé›»æ± ã®ä¸­ã«ã‚ã‚‹ã€ŒåŒ–å­¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã€ã‚¹ã‚¤ãƒƒãƒã‚ªãƒ³ã§ã€Œé›»æ°—ã€ã«å¤‰ã‚ã‚‹ã€‚ã§ã€ãã®é›»æ°—ãŒé›»çƒã«è¡Œã£ã¦ã€Œå…‰ã€ã«ãªã‚‹ã‚“ã‚ˆã€‚ã¡ã‚‡ã£ã¨ç†±ãã‚‚ãªã‚‹ã‘ã©ãªã€‚"
                },
                {
                    question: "ãƒ€ãƒ ã§ç™ºé›»ã™ã‚‹ã€Œæ°´åŠ›ç™ºé›»ã€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["ä½ç½®", "é‹å‹•", "é›»æ°—"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š é«˜ã„ã¨ã“ã‚ã«ã‚ã‚‹æ°´ãŒã€ã‚¿ãƒ¼ãƒ“ãƒ³ã‚’å›ã—ã¦ã€é›»æ°—ãŒã§ãã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›2å›ï¼‰",
                    explanation: "ãƒ€ãƒ ã®é«˜ã„ã¨ã“ã«ã‚ã‚‹æ°´ã¯ã€Œä½ç½®ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã£ã¨ã‚‹ã€‚ãã‚ŒãŒè½ã¡ã‚‹æ™‚ã«ã€Œé‹å‹•ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«ãªã£ã¦ã€æ°´è»Šï¼ˆã‚¿ãƒ¼ãƒ“ãƒ³ï¼‰ã‚’ã‚°ãƒ«ã‚°ãƒ«å›ã—ã¦ã€æœ€å¾Œã¯ç™ºé›»æ©Ÿã§ã€Œé›»æ°—ã€ã«ãªã‚‹ã‚“ã‚„ãªã€‚"
                },
                {
                    question: "è‡ªè»¢è»Šã®ã€Œãƒ€ã‚¤ãƒŠãƒ¢ãƒ©ã‚¤ãƒˆã€ãŒç‚¹ç¯ã™ã‚‹ã¾ã§ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["é‹å‹•", "é›»æ°—", "å…‰"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ã‚¿ã‚¤ãƒ¤ãŒå›ã‚‹åŠ›ãŒã€é›»æ°—ã‚’ä½œã£ã¦ã€ãƒ©ã‚¤ãƒˆãŒå…‰ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›2å›ï¼‰",
                    explanation: "è‡ªè»¢è»Šã‚’ã“ãã¨ã‚¿ã‚¤ãƒ¤ãŒå›ã‚‹ã€ã“ã‚ŒãŒã€Œé‹å‹•ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã€‚ãã„ã¤ãŒãƒ€ã‚¤ãƒŠãƒ¢ï¼ˆã¡ã£ã“ã„ç™ºé›»æ©Ÿï¼‰ã‚’å›ã—ã¦ã€Œé›»æ°—ã€ã‚’ä½œã£ã¦ã€ãƒ©ã‚¤ãƒˆãŒã€Œå…‰ã€ã‚‹ã‚ã‘ã‚„ã€‚è‡ªåˆ†ã®åŠ›ã§å…‰ã‚‰ã›ã‚‹ã‚“ã€ãˆãˆã‚ˆãªï¼"
                },
                {
                    question: "ã€Œã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã€ãŒéŸ³ã‚’å‡ºã™ã¾ã§ã®ä¸»ãªã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["é›»æ°—", "é‹å‹•", "éŸ³"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š é›»æ°—ã®ä¿¡å·ãŒã€ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã‚’éœ‡ã‚ã›ã¦ï¼ˆå‹•ã‹ã—ã¦ï¼‰ã€éŸ³ãŒé³´ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›2å›ï¼‰",
                    explanation: "ã‚¢ãƒ³ãƒ—ã‹ã‚‰æ¥ãŸã€Œé›»æ°—ã€ä¿¡å·ãŒã€ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã®ä¸­ã®ã‚³ã‚¤ãƒ«ã‚„ç£çŸ³ã‚’å‹•ã‹ã—ã¦ï¼ˆã€Œé‹å‹•ã€ï¼‰ã€ã‚³ãƒ¼ãƒ³ï¼ˆç´™ã®éƒ¨åˆ†ï¼‰ã‚’éœ‡ã‚ã›ã‚‹ã‚“ã‚ˆã€‚ãã®éœ‡ãˆãŒç©ºæ°—ã«ä¼ã‚ã£ã¦ã€ŒéŸ³ã€ã«ãªã‚‹ã‚“ã‚„ãªã€‚"
                },
                {
                    question: "ã€Œç«åŠ›ç™ºé›»æ‰€ã€ã§é›»æ°—ãŒä½œã‚‰ã‚Œã€å®¶ã§ã€Œã‚¹ãƒãƒ›ã‚’å……é›»ã€ã™ã‚‹ã¾ã§ã®ä¸»ãªã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿ",
                    answer: ["åŒ–å­¦", "ç†±", "é‹å‹•", "é›»æ°—", "åŒ–å­¦"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ç‡ƒæ–™ã‚’ç‡ƒã‚„ã—ã¦ã€ã‚¿ãƒ¼ãƒ“ãƒ³ã‚’å›ã—ã¦ã€ç™ºé›»ã—ã¦ã€æœ€å¾Œã¯ãƒãƒƒãƒ†ãƒªãƒ¼ã«è“„ãˆã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›4å›ï¼‰",
                    explanation: "ã¾ãšçŸ³ç‚­ã¨ã‹å¤©ç„¶ã‚¬ã‚¹ï¼ˆã€ŒåŒ–å­¦ã€ï¼‰ã‚’ç‡ƒã‚„ã™ï¼ˆã€Œç†±ã€ï¼‰ã€‚ãã®ç†±ã§è’¸æ°—ã‚’ä½œã£ã¦ã‚¿ãƒ¼ãƒ“ãƒ³ã‚’å›ã™ï¼ˆã€Œé‹å‹•ã€ï¼‰ã€‚ã§ã€ç™ºé›»æ©ŸãŒã€Œé›»æ°—ã€ã‚’ä½œã‚‹ã€‚å®¶ã«æ¥ãŸé›»æ°—ã‚’ã‚¹ãƒãƒ›ã®ãƒãƒƒãƒ†ãƒªãƒ¼ã«è“„ãˆã‚‹ã®ã¯ã€ã¾ãŸã€ŒåŒ–å­¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«æˆ»ã—ã¨ã‚‹ã‚“ã‚ˆã€‚"
                }
            ];
            
            // â˜… å¤‰æ›´: EXã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
            const exQuizzes = [
                {
                    question: "ã€Œã‚¬ã‚½ãƒªãƒ³è»Šã€ãŒèµ°ã‚Šã€åŒæ™‚ã«ã€Œãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒˆã€ãŒç‚¹ç¯ã—ã¦ã„ã‚‹ã¨ãã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿï¼ˆã‚¨ãƒ³ã‚¸ãƒ³å§‹å‹•å¾Œï¼‰",
                    answer: ["åŒ–å­¦", "ç†±", "é‹å‹•", "é›»æ°—", "å…‰"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ç‡ƒæ–™ï¼ˆã‚¬ã‚½ãƒªãƒ³ï¼‰ãŒã€ã‚¨ãƒ³ã‚¸ãƒ³ã‚’å‹•ã‹ã—ã€ã•ã‚‰ã«ç™ºé›»ã—ã¦ãƒ©ã‚¤ãƒˆãŒå…‰ã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›4å›ï¼‰",
                    explanation: "ã‚¬ã‚½ãƒªãƒ³ï¼ˆåŒ–å­¦ï¼‰â†’ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç†±â†’é‹å‹•ï¼‰ã§è»ŠãŒèµ°ã‚‹ã€‚ãã®ï¼ˆé‹å‹•ï¼‰ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ä¸€éƒ¨ã‚’ç™ºé›»æ©Ÿï¼ˆã‚ªãƒ«ã‚¿ãƒãƒ¼ã‚¿ãƒ¼ï¼‰ã§ï¼ˆé›»æ°—ï¼‰ã«å¤‰ãˆã¦ã€ãƒ©ã‚¤ãƒˆãŒï¼ˆå…‰ï¼‰ã‚‹ã‚“ã‚ˆã€‚ä¸€çŸ³äºŒé³¥ã‚„ãªï¼"
                },
                {
                    question: "ã€Œãƒã‚¤ã‚¯ã€ã§æ‹¾ã£ãŸéŸ³ã‚’ã€Œã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã€ã§é³´ã‚‰ã™ã¨ãã®ä¸»ãªã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ã¯ï¼Ÿï¼ˆã‚¢ãƒ³ãƒ—å«ã‚€ï¼‰",
                    answer: ["éŸ³", "é›»æ°—", "é‹å‹•", "éŸ³"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š éŸ³ãŒé›»æ°—ä¿¡å·ã«ãªã‚Šã€ãã‚ŒãŒã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã‚’éœ‡ã‚ã›ã¦ã€ã¾ãŸéŸ³ã«ãªã‚‹ã‚ˆã€‚ï¼ˆå¤‰æ›3å›ï¼‰",
                    explanation: "å£°ï¼ˆéŸ³ï¼‰ãŒãƒã‚¤ã‚¯ã§ï¼ˆé›»æ°—ï¼‰ä¿¡å·ã«å¤‰ã‚ã‚‹ã€‚ã‚¢ãƒ³ãƒ—ã§ãã®é›»æ°—ãŒå¼·ã‚ã‚‰ã‚Œã¦ã€ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã‚’éœ‡ã‚ã›ã‚‹ï¼ˆé‹å‹•ï¼‰ã€‚ãã®éœ‡ãˆãŒç©ºæ°—ï¼ˆéŸ³ï¼‰ã«ãªã£ã¦èã“ãˆã‚‹ã‚“ã‚ˆã€‚é€šå¸¸å•é¡Œ9ã®å¿œç”¨ã‚„ãªï¼"
                },
                { // â˜… å¤‰æ›´: EX3ã‚’ã€ŒåŸå­åŠ›ç™ºé›»ã€ã«å·®ã—æ›¿ãˆ
                    question: "ã€ŒåŸå­åŠ›ç™ºé›»æ‰€ã€ã§ç™ºé›»ã—ã€å®¶ã§ã€Œé›»æ°—ã‚±ãƒˆãƒ«ã€ã§ãŠæ¹¯ã‚’æ²¸ã‹ã™ã¾ã§ã®ä¸»ãªå¤‰æ›ã¯ï¼Ÿ",
                    answer: ["åŒ–å­¦", "ç†±", "é‹å‹•", "é›»æ°—", "ç†±"],
                    hint: "ãƒ’ãƒ³ãƒˆï¼š ã‚¦ãƒ©ãƒ³ï¼ˆç‡ƒæ–™ï¼‰ãŒã€ã‚¿ãƒ¼ãƒ“ãƒ³ã‚’å›ã—ã¦ç™ºé›»ã—ã€å®¶ã§ãŠæ¹¯ã‚’æ²¸ã‹ã™ã‚ˆã€‚ï¼ˆå¤‰æ›4å›ï¼‰",
                    explanation: "ã‚¹ã‚¿ãƒ¼ãƒˆã¯ã‚¦ãƒ©ãƒ³ãŒæŒã£ã¦ã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆã€ŒåŒ–å­¦ã€ï¼‰ã‚„ã€‚ãã‚Œã‚’æ ¸åˆ†è£‚ã•ã›ã¦ï¼ˆã€Œç†±ã€ï¼‰ã€ç«åŠ›ç™ºé›»ã¨åŒã˜ã‚ˆã†ã«è’¸æ°—ã§ã‚¿ãƒ¼ãƒ“ãƒ³ã‚’å›ã™ï¼ˆã€Œé‹å‹•ã€ï¼‰ã€‚ã§ã€ç™ºé›»æ©ŸãŒï¼ˆã€Œé›»æ°—ã€ï¼‰ã‚’ä½œã£ã¦ã€å®¶ã§ã‚±ãƒˆãƒ«ãŒï¼ˆã€Œç†±ã€ï¼‰ã«å¤‰ãˆã‚‹ã€‚ç«åŠ›ã¨ã‚¹ã‚¿ãƒ¼ãƒˆãŒé•ã†ã ã‘ã‚„ãªï¼"
                }
            ];

            // --- åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚¿ã‚¤ãƒ— ---
            const allEnergyTypes = ["é›»æ°—", "ç†±", "å…‰", "é‹å‹•", "åŒ–å­¦", "ä½ç½®", "éŸ³"];

            // --- DOMè¦ç´ ã®å–å¾— ---
            const quizArea = document.getElementById('quiz-area');
            const questionNumber = document.getElementById('question-number');
            const questionText = document.getElementById('question-text');
            const cardOptionsArea = document.getElementById('card-options-area');
            const cardOptions = document.getElementById('card-options');
            const answerArea = document.getElementById('answer-area');
            const answerContainer = document.getElementById('answer-container');
            const buttonBar = document.getElementById('button-bar');
            const checkBtn = document.getElementById('check-answer');
            const resetBtn = document.getElementById('reset-answer');
            const nextBtn = document.getElementById('next-question');
            const feedbackArea = document.getElementById('feedback-area');
            const explanationArea = document.getElementById('explanation-area');
            const explanationText = document.getElementById('explanation-text');
            
            document.querySelector('#answer-area h2').textContent = '2. ã‚ãªãŸã®ç­”ãˆï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å‰Šé™¤ï¼‰';


            // --- ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ ---
            let currentQuizIndex = 0; // ç¾åœ¨ã®å•é¡Œç•ªå· (0ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ)
            let userAnswer = [];      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼åã®é…åˆ—ï¼‰
            let isExMode = false;     // EXãƒ¢ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚°

            // --- ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° ---

            /**
             * ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚¿ã‚¤ãƒ—åã‹ã‚‰å¯¾å¿œã™ã‚‹Tailwindã®CSSã‚¯ãƒ©ã‚¹æ–‡å­—åˆ—ã‚’è¿”ã™
             */
            function getColorClassForEnergy(type) {
                switch (type) {
                    case "é›»æ°—": return "bg-yellow-100 border-yellow-300 text-yellow-800 hover:bg-yellow-200";
                    case "ç†±": return "bg-red-100 border-red-300 text-red-800 hover:bg-red-200";
                    case "å…‰": return "bg-gray-50 border-gray-300 text-gray-800 hover:bg-gray-100";
                    case "é‹å‹•": return "bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200";
                    case "åŒ–å­¦": return "bg-green-100 border-green-300 text-green-800 hover:bg-green-200";
                    case "ä½ç½®": return "bg-blue-100 border-blue-300 text-blue-800 hover:bg-blue-200";
                    case "éŸ³": return "bg-purple-100 border-purple-300 text-purple-800 hover:bg-purple-200";
                    default: return "bg-gray-100"; // ä¸‡ãŒä¸€
                }
            }
            
            /**
             * ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œã™ã‚‹çµµæ–‡å­—ã‚’è¿”ã™
             */
            function getEmojiForEnergy(type) {
                switch (type) {
                    case "é›»æ°—": return "âš¡";
                    case "ç†±": return "ğŸ”¥";
                    case "å…‰": return "ğŸ’¡";
                    case "é‹å‹•": return "ğŸƒ";
                    case "åŒ–å­¦": return "ğŸ§ª";
                    case "ä½ç½®": return "â›°ï¸";
                    case "éŸ³": return "ğŸ”Š";
                    default: return "";
                }
            }

            // --- é–¢æ•° ---
            
            /**
             * ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ ã«ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆçµµæ–‡å­—ï¼‰ã‚’è¡¨ç¤ºã™ã‚‹
             */
            function showClickEffect(targetElement) {
                const energyType = targetElement.dataset.energy;
                if (!energyType) return; 

                const emoji = getEmojiForEnergy(energyType);
                if (!emoji) return;

                const effectEl = document.createElement('div');
                effectEl.textContent = emoji;
                effectEl.className = 'absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-4xl opacity-100 transition-all duration-500 ease-out z-10';
                effectEl.style.pointerEvents = 'none'; 

                targetElement.style.position = 'relative';
                targetElement.appendChild(effectEl);

                requestAnimationFrame(() => {
                    effectEl.style.transform = 'translate(-50%, -150%)'; 
                    effectEl.style.opacity = '0';
                });

                setTimeout(() => {
                    if (effectEl.parentNode) {
                        effectEl.parentNode.removeChild(effectEl);
                    }
                    targetElement.style.position = ''; 
                }, 500); 
            }


            /**
             * 1. é¸æŠè‚¢ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’æç”»ã™ã‚‹
             */
            function renderEnergyCards() {
                cardOptions.innerHTML = ''; 
                allEnergyTypes.forEach(type => {
                    const card = document.createElement('button');
                    card.textContent = type;
                    card.className = `energy-card ${getColorClassForEnergy(type)} w-24 text-center rounded-lg p-4 my-2 mx-3 font-medium shadow-md transition-all duration-200 hover:scale-105 border-2`;
                    card.dataset.energy = type;
                    card.addEventListener('click', (event) => handleCardClick(type, event.currentTarget));
                    cardOptions.appendChild(card);
                });
            }

            /**
             * 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”æ¬„ã‚’æç”»ã™ã‚‹
             */
            function renderUserAnswer() {
                answerContainer.innerHTML = ''; 
                if (userAnswer.length === 0) {
                    answerContainer.innerHTML = '<span class="text-gray-400">ã“ã“ã«ã‚«ãƒ¼ãƒ‰ãŒä¸¦ã¶ã‚ˆ</span>';
                    return;
                }
                userAnswer.forEach((type, index) => {
                    const card = document.createElement('div');
                    card.textContent = type;
                    card.className = `answer-card ${getColorClassForEnergy(type)} w-24 text-center rounded-lg p-4 m-2 font-medium shadow-sm border-2 cursor-pointer hover:opacity-80 transition-opacity`;
                    
                    card.addEventListener('click', () => {
                        userAnswer.splice(index, 1); // indexç•ªç›®ã®è¦ç´ ã‚’1ã¤å‰Šé™¤
                        renderUserAnswer();          // å›ç­”æ¬„ã‚’å†æç”»
                    });

                    if (index < userAnswer.length) {
                        answerContainer.appendChild(card);
                        if (index < userAnswer.length - 1) {
                            const arrow = document.createElement('span');
                            arrow.className = "text-2xl text-gray-400 mx-1 font-mono";
                            arrow.textContent = "â†’";
                            answerContainer.appendChild(arrow);
                        }
                    }
                });
            }

            /**
             * 3. å•é¡Œæ–‡ã¨ç•ªå·ã‚’æ›´æ–°ã™ã‚‹
             */
            function loadQuiz(index) {
                // ç¾åœ¨ã®ãƒ¢ãƒ¼ãƒ‰ï¼ˆé€šå¸¸/EXï¼‰ã«åˆã‚ã›ã¦ã‚¯ã‚¤ã‚ºãƒªã‚¹ãƒˆã‚’é¸æŠ
                const currentQuizList = isExMode ? exQuizzes : quizzes;

                if (index >= currentQuizList.length) {
                    // --- å…¨å•ã‚¯ãƒªã‚¢æ™‚ã®å‡¦ç† ---
                    quizArea.style.display = 'none';
                    cardOptionsArea.style.display = 'none';
                    answerArea.style.display = 'none';
                    buttonBar.style.display = 'none';
                    explanationArea.style.display = 'none';
                    
                    let clearHtml = '';
                    if (isExMode) {
                        // --- EXã‚¯ãƒªã‚¢ç”»é¢ ---
                        clearHtml = `
                            <div class="text-5xl mb-4">ğŸ†</div>
                            <div class="text-2xl font-bold text-yellow-800">EXã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ï¼</div>
                            <p class="text-lg text-yellow-700 mt-2">ã™ã”ã„ãªï¼å®Œç’§ã‚„ï¼</p>
                            <div class="mt-6 flex flex-col sm:flex-row gap-3">
                                <button id="restart-btn" class="w-full sm:w-1/2 bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-blue-600 transition-all duration-200">
                                    æœ€åˆã‹ã‚‰æŒ‘æˆ¦ã™ã‚‹
                                </button>
                                <button id="restart-ex-btn" class="w-full sm:w-1/2 bg-orange-500 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-orange-600 transition-all duration-200">
                                    EXã ã‘ã‚‚ã†ä¸€åº¦
                                </button>
                            </div>
                        `;
                        feedbackArea.className = 'mt-4 p-8 rounded-lg text-center font-medium bg-yellow-100 border-2 border-yellow-300 shadow-lg';
                    } else {
                        // --- é€šå¸¸ã‚¯ãƒªã‚¢ç”»é¢ ---
                        clearHtml = `
                            <div class="text-5xl mb-4">ğŸ‰</div>
                            <div class="text-2xl font-bold text-green-800">å…¨å•ã‚¯ãƒªã‚¢ï¼</div>
                            <p class="text-lg text-green-700 mt-2">ãŠã¤ã‹ã‚Œã•ã¾ï¼ã‚ˆãé ‘å¼µã£ãŸãªï¼</p>
                            <div class="mt-6 flex flex-col sm:flex-row gap-3">
                                <button id="restart-btn" class="w-full sm:w-1/2 bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-blue-600 transition-all duration-200">
                                    ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹
                                </button>
                                <button id="ex-btn" class="w-full sm:w-1/2 bg-purple-600 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-purple-700 transition-all duration-200">
                                    EXã‚¹ãƒ†ãƒ¼ã‚¸ã«æŒ‘æˆ¦
                                </button>
                            </div>
                        `;
                        feedbackArea.className = 'mt-4 p-8 rounded-lg text-center font-medium bg-green-100 border-2 border-green-300 shadow-lg';
                    }
                    
                    feedbackArea.innerHTML = clearHtml;
                    feedbackArea.style.display = 'block';

                    // --- ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ  ---
                    const restartBtn = document.getElementById('restart-btn');
                    if (restartBtn) {
                        restartBtn.addEventListener('click', () => {
                            isExMode = false; // é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã™
                            currentQuizIndex = 0;
                            loadQuiz(0);
                        });
                    }

                    const exBtn = document.getElementById('ex-btn'); // é€šå¸¸ã‚¯ãƒªã‚¢æ™‚
                    if (exBtn) {
                        exBtn.addEventListener('click', () => {
                            isExMode = true; // EXãƒ¢ãƒ¼ãƒ‰ã¸
                            currentQuizIndex = 0;
                            loadQuiz(0);
                        });
                    }
                    
                    const restartExBtn = document.getElementById('restart-ex-btn'); // EXã‚¯ãƒªã‚¢æ™‚
                    if (restartExBtn) {
                        restartExBtn.addEventListener('click', () => {
                            isExMode = true; // EXãƒ¢ãƒ¼ãƒ‰ã®ã¾ã¾
                            currentQuizIndex = 0;
                            loadQuiz(0);
                        });
                    }
                    return;
                }

                // --- é€šå¸¸ã®å•é¡Œèª­ã¿è¾¼ã¿æ™‚ ---
                quizArea.style.display = 'block';
                cardOptionsArea.style.display = 'block';
                answerArea.style.display = 'block';
                buttonBar.style.display = 'flex'; 

                const quiz = currentQuizList[index];
                questionNumber.textContent = isExMode ? `EX ${index + 1}å•ç›®` : `${index + 1}å•ç›®`;
                questionText.textContent = quiz.question;
                
                userAnswer = [];
                renderUserAnswer();
                feedbackArea.style.display = 'none';
                explanationArea.style.display = 'none';

                checkBtn.style.display = 'block';
                resetBtn.style.display = 'block';
                nextBtn.style.display = 'none';
                
                checkBtn.disabled = false;
                resetBtn.disabled = false;
            }

            /**
             * 4. [ã‚¤ãƒ™ãƒ³ãƒˆ] ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚«ãƒ¼ãƒ‰ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚
             */
            function handleCardClick(energyType, clickedCardElement) {
                userAnswer.push(energyType);
                renderUserAnswer(); 

                if (clickedCardElement) {
                    showClickEffect(clickedCardElement);
                }
            }

            /**
             * 5. [ã‚¤ãƒ™ãƒ³ãƒˆ] ã€Œã“ã‚Œã§ã©ã†ï¼Ÿã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚
             */
            function checkAnswer() {
                const currentQuizList = isExMode ? exQuizzes : quizzes;
                const quiz = currentQuizList[currentQuizIndex];
                const correctAnswer = quiz.answer;

                if (JSON.stringify(userAnswer) === JSON.stringify(correctAnswer)) {
                    // æ­£è§£
                    feedbackArea.textContent = 'æ­£è§£ï¼ã™ã”ã„ï¼';
                    feedbackArea.className = 'mt-4 p-3 rounded-lg text-center font-medium bg-green-100 text-green-700';
                    explanationText.textContent = quiz.explanation;
                    explanationArea.style.display = 'block';
                    
                    checkBtn.style.display = 'none';
                    resetBtn.style.display = 'none';
                    nextBtn.style.display = 'block';
                } else {
                    // ä¸æ­£è§£
                    feedbackArea.textContent = `ãŠã—ã„ï¼ ${quiz.hint}`;
                    feedbackArea.className = 'mt-4 p-3 rounded-lg text-center font-medium bg-red-100 text-red-700';
                }
                feedbackArea.style.display = 'block';
            }

            /**
             * 6. [ã‚¤ãƒ™ãƒ³ãƒˆ] ã€Œã‚„ã‚ŠãªãŠã—ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚
             */
            function resetAnswer() {
                userAnswer = [];
                renderUserAnswer();
                feedbackArea.style.display = 'none';
                explanationArea.style.display = 'none';
            }

            /**
             * 7. [ã‚¤ãƒ™ãƒ³ãƒˆ] ã€Œæ¬¡ã®å•é¡Œã¸ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚
             */
            function nextQuestion() {
                currentQuizIndex++;
                loadQuiz(currentQuizIndex); // loadQuizãŒã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã‚‹
            }

// --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ² ---
            checkBtn.addEventListener('click', checkAnswer);
            resetBtn.addEventListener('click', resetAnswer);
            nextBtn.addEventListener('click', nextQuestion);

            // --- ã‚¢ãƒ—ãƒªåˆæœŸåŒ– ---
            renderEnergyCards();
            loadQuiz(currentQuizIndex);
        });
    </script>
</body>
</html>